(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(t,e,n){"use strict";n.d(e,"b",function(){return v}),n.d(e,"a",function(){return l});var r=n(167),o=n.n(r);n(4);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}
/*!
 * 管理数据存储
 * Created by j on 2019-01-12.
 */var c=new o.a;window.addEventListener("storage",function(t){console.log("window.storage event",+new Date,t);var e=t.key,n=t.oldValue,r=t.newValue,o="",i=null,a=null,s=e.split(/[^\w]+/)[0];!n&&r?(o="add",i=r):n&&!r?(o="remove",i=n):n&&r&&(o="change",i=r);try{a=JSON.parse(i)}catch(o){console.log(o),a=null}u.forEach(function(e){e.namespace===s&&e.emit(o,a||i,t)})});var u=[];var l=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!(this instanceof t))return new t(e);this.namespace=e,this.separator=".",this._on={}}return s(t,null,[{key:"getAll",value:function(){return JSON.parse(JSON.stringify(localStorage))}},{key:"init",value:function(t){Object.entries(t).forEach(function(t){var e=t[0],n=t[1];console.log(e,n),localStorage.setItem(t[0],t[1])})}},{key:"remove",value:function(t){localStorage.removeItem(t)}}]),s(t,[{key:"on",value:function(t,e){t=this._prefix(t),u.includes(this)||u.push(this),this._on[t]=!0,c.on(t,e)}},{key:"off",value:function(t,e){var n,r,o;t=this._prefix(t),delete this._on[t],0===Object.keys(this._on).length&&(n=this,"number"==typeof(o=(r=u).findIndex(function(t){return t===n}))&&r.splice(o,0)),c.removeListener(t,e)}},{key:"emit",value:function(t){t=this._prefix(t);for(var e=this._prefix("*"),n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];this._on[e]?(r.unshift(t),c.emit(e,r)):this._on[t]?(r.push(t),c.emit(t,r)):console.log("Not listener for ",t,r,this)}},{key:"_prefix",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"".concat(this.namespace).concat(this.separator).concat(t)}}]),t}(),f={get:function(t){var e=this._prefix(),n={},r="object"===i(t)?t.id:t;if(r)return JSON.parse(localStorage.getItem(this._prefix(r)));for(var o in localStorage)0===o.indexOf(e)&&(n[r=o.replace(e,"")||this.namespace]=JSON.parse(localStorage[o]));return n},has:function(t){return this.get(t)},set:function(t){var e=t.id||Math.random().toFixed(8).replace("0.","");e=this._prefix(e),localStorage.setItem(e,JSON.stringify(t))},remove:function(t){var e="object"===i(t)?t.id:t;return localStorage.removeItem(this._prefix(e))},clear:function(){var t=this._prefix();for(var e in localStorage)0===e.indexOf(t)&&localStorage.removeItem(e)}};function v(t){return new l(t)}Object.keys(f).forEach(function(t){l.prototype[t]=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=this,i=f[t];return new Promise(function(e,r){var a=i.apply(o,n);console.log("Db ".concat(o.namespace," exec ").concat(t,"; args => "),n,"return =>",a);var s=n[0];/remove/.test(t)?o.emit("remove",s,a):/set/.test(t)?o.emit("change",s,a):/clear/.test(t)&&o.emit("clear",s,a),e(a)})}})},163:function(t,e,n){},164:function(t,e,n){},165:function(t,e,n){"use strict";var r=n(39);
/*!
 * define Vue mixins
 * Created by j on 2019-01-13.
 */e.a={methods:{editBookmark:r.b},watch:{"$root.event":function(t,e){console.log("mixins watch $root.event",this.name),this.getData&&this.getData()},"$store.state.ui.list.reverse":function(t){this.bookmarkArray&&this.bookmarkArray.reverse()}}}},169:function(t,e,n){"use strict";n.r(e);var r=n(4),o=n(12),i=n(38),a=n(37),s=n(165),c=n(13);function u(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f=Object(o.b)("visit"),v=Object(o.b)("shortcut"),m={name:"hot",mixins:[s.a],components:{toolBar:a.a,list:i.a},data:function(){return{bookmarkArray:[]}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){l(t,e,n[e])})}return t}({},Object(c.c)({reverse:function(t){return t.ui.list.reverse}}),{count:function(){return this.bookmarkArray.length}}),created:function(){var t=this;this.getData();var e=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];console.log("db event listener",n),t.getData()};f.on("*",e),this.$once("hook:beforeDestroy",function(){f.off("*",e)})},methods:{getData:function(){var t,e=(t=regeneratorRuntime.mark(function t(){var e,n,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.get();case 2:if(e=t.sent,!(n=Object.keys(e)).length){t.next=12;break}return t.next=7,r.a.get(n);case 7:(o=t.sent).forEach(function(t){t.visit=e[t.id]}),o.sort(function(t,e){return e.visit.count-t.visit.count}),this.reverse&&o.reverse(),this.bookmarkArray=o;case 12:case"end":return t.stop()}},t,this)}),function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){u(i,r,o,a,s,"next",t)}function s(t){u(i,r,o,a,s,"throw",t)}a(void 0)})});return function(){return e.apply(this,arguments)}}(),remove:function(t){r.a.remove(t)},edit:function(t){this.editBookmark(t)},addShortcut:function(t){v.set(t),this.$set(t,"shortcut",!0)},removeShortcut:function(t){v.remove(t),this.$set(t,"shortcut",!1)}},watch:{"$root.event":function(t){console.log("$root.event watcher => ",t),this.getData()}}},h=n(2),d=Object(h.a)(m,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("tool-bar",{attrs:{count:t.count}}),t._v(" "),n("list",{attrs:{"bookmark-array":t.bookmarkArray},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.bookmark;return[r.shortcut?n("button",{attrs:{title:"移除快捷方式"},on:{click:function(e){t.removeShortcut(r)}}},[n("i",{staticClass:"fas fa-unlink"})]):n("button",{attrs:{title:"加入快捷方式"},on:{click:function(e){t.addShortcut(r)}}},[n("i",{staticClass:"fas fa-link"})]),t._v(" "),n("button",{on:{click:function(e){t.edit(r)}}},[n("i",{staticClass:"fas fa-edit"})]),t._v(" "),n("button",{on:{click:function(e){t.remove(r)}}},[n("i",{staticClass:"far fa-trash-alt"})]),t._v(" "),n("button",[t._v(t._s(r.visit.count))])]}}])})],1)},[],!1,null,"0073e79f",null);d.options.__file="hot.vue";e.default=d.exports},37:function(t,e,n){"use strict";var r=n(13);function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){i(t,e,n[e])})}return t}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var a={name:"list-tool-bar",props:{paths:Array,sortOptions:Array,count:Number},data:function(){return{sortBy:""}},computed:o({},Object(r.c)({ui:"ui"}),{reverse:{get:function(){return this.$store.state.ui.list.reverse},set:function(t){this.$store.commit("updateUi",["list.reverse",t])}}}),methods:o({},Object(r.b)({updateUi:"updateUi"}))},s=(n(381),n(2)),c=Object(s.a)(a,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tool-bar"},[t.paths?n("div",{staticClass:"paths"},t._l(t.paths,function(e){return e.title?n("router-link",{key:e.id,attrs:{to:"/node/"+e.id}},[t._v("\n              "+t._s(e.title)+"   >\n        ")]):t._e()}),1):t._e(),t._v(" "),t.sortOptions?n("div",{staticClass:"select is-small"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.sortBy,expression:"sortBy"}],on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.sortBy=e.target.multiple?n:n[0]},function(e){t.$emit("sortByChange",e.target.value)}]}},t._l(t.sortOptions,function(e){return n("option",{domProps:{value:e.value}},[t._v(t._s(e.text))])}),0)]):t._e(),t._v(" "),n("div",[n("label",{staticClass:"checkbox"},[t._v("\n              "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.reverse,expression:"reverse"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.reverse)?t._i(t.reverse,null)>-1:t.reverse},on:{change:function(e){var n=t.reverse,r=e.target,o=!!r.checked;if(Array.isArray(n)){var i=t._i(n,null);r.checked?i<0&&(t.reverse=n.concat([null])):i>-1&&(t.reverse=n.slice(0,i).concat(n.slice(i+1)))}else t.reverse=o}}}),t._v("\n            排序反转\n        ")])]),t._v(" "),n("div"),t._v(" "),n("div",{staticClass:"flex-shrink-right"},[t._t("default")],2),t._v(" "),t.count?n("div",{staticClass:"counter"},[t._v(" 共 "+t._s(t.count)+" 项")]):t._e(),t._v(" "),n("div",{staticClass:"show-type"},[n("button",{class:{active:"list"===t.ui.list.showType},on:{click:function(e){t.updateUi(["list.showType","list"])}}},[n("i",{staticClass:"fa fa-list"})]),t._v(" "),n("button",{class:{active:"grid"===t.ui.list.showType},on:{click:function(e){t.updateUi(["list.showType","grid"])}}},[n("i",{staticClass:"fa fa-th"})])])])},[],!1,null,"3ec8fb58",null);c.options.__file="listToolBar.vue";e.a=c.exports},375:function(t,e){t.exports="img/7360254d509706d9b22a3d60d852bc86.png"},376:function(t,e,n){"use strict";var r=n(77);n.n(r).a},377:function(t,e,n){"use strict";var r=n(78);n.n(r).a},378:function(t,e,n){"use strict";var r=n(79);n.n(r).a},379:function(t,e,n){"use strict";var r=n(80);n.n(r).a},38:function(t,e,n){"use strict";var r=n(94),o=n(13),i=n(12);function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object(i.b)("shortcut");var s={name:"list",components:{listItem:r.a},props:{bookmarkArray:Array,showType:{type:String,default:""}},data:function(){return{listType:""}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){a(t,e,n[e])})}return t}({},Object(o.c)({ui:"ui"})),mounted:function(){window.innerWidth<900&&(this.listType="grid")},methods:{onContextmenu:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];console.log("contextmenu",e),this.$emit("contextmenu",e)}}},c=(n(380),n(2)),u=Object(c.a)(s,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("ul",{class:t.listType||t.showType||t.ui.list.showType},t._l(t.bookmarkArray,function(e){return n("list-item",{key:e.id,attrs:{bookmark:e},on:{contextmenu:t.onContextmenu}},[t._t("default",null,{bookmark:e})],2)}),1)])},[],!1,null,"f8581462",null);u.options.__file="list.vue";e.a=u.exports},380:function(t,e,n){"use strict";var r=n(81);n.n(r).a},381:function(t,e,n){"use strict";var r=n(82);n.n(r).a},39:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r,o=n(15),i=n(55),a=n(92),s={data:{visible:!0,exit:!1,bookmark:{}},render:function(t){var e=this,n=this.bookmark&&t(a.a,{slot:"default",props:{bookmark:this.$clone(this.bookmark)},on:{close:function(){e.visible=!1,e.bookmark=null}}}),r={props:{value:this.visible}};return t(i.b,r,[n])}};function c(t){r||((r=r||new o.a(s)).$mount(document.createElement("div")),document.body.appendChild(r.$el)),(r=r).bookmark=t,r.visible=!0}function u(t){c({title:"新建文件夹",parentId:t.id})}e.b=c},4:function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return function(t){if(Array.isArray(t))return t}
/*!
 * 一个工具函数, 用于生成chrome api相同接口的包装对象
 * 但是包装对象的接口支持promise,
 * 同时提供一个on方法, 添加事件监听器的简洁写法
 * example:
 * // 原生接口调用
 * chrome.tabs.getCurrent(tab => tab)
 * // 包装对象调用
 * const tabs = wrapApi(chrome.tabs)
 * tabs.getCurrent().then(tab => tab)
 * tabs.on('onCreated', tab => tab)
 *
 * Created by j on 2019-01-12.
 */(t)||function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.events=e.events||[];e.api=t;for(var i=Object.entries(t),a=0;a<i.length;a++){var s=o(i[a],2),c=s[0],u=s[1];"function"==typeof u?e[c]=function(n){return function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return console.log("chrome API Invoking => ".concat(e.name,".").concat(n),"args => ".concat(o)),new Promise(function(e,r){o.push(function(t){e(t)}),t[n].apply(t,o)})}}(c):"object"===r(u)&&c.startsWith("on")&&n.push(c)}return e.on=function(t,n){n||(n=t,t=void 0);var r=this.events,o=this.api;t=t||r;var i=(t=Array.isArray(t)?t:[t]).length>1?"unshift":"push";t.forEach(function(t){console.log("addListener for ".concat(e.name,"."),t),r.includes(t)&&o[t].addListener(function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];console.log(t,r),r[i](t),n.apply(null,r)})})},e}
/*!
 * 
 * Created by j on 2019-01-13.
 */var a=i(chrome.downloads);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}
/*!
 * chrome.bookmarks wrapper
 * Created by j on 2019-01-05.
 */var c=i(chrome.bookmarks,{name:"bookmarks"}),u={on:function(t,e){return c.on(t,e)},get:function(t){return c.get(t)},add:function(t){return this.create(t)},create:function(t){var e={};return e.title=t.title,e.url=t.url,t.parentId&&(e.parentId=t.parentId),c.create(e)},recover:function(t){var e={};return e.title=t.title,e.url=t.url,e.parentId=t.parentId,e.index=t.index,c.create(e)},remove:function(t){return t.url?c.remove(t.id):c.removeTree(t.id)},update:function(t){var e={title:t.title,url:t.url};return c.update(t.id,e)},move:function(t,e){var n="object"===s(t)?t.id:t;return c.move(n,e)},getChildren:function(t){return c.getChildren(t)},getTree:function(t){return c.getTree().then(function(e){return t&&function t(e){for(var n=e.length;n--;){var r=e[n];r.children?t(r.children):e.splice(n,1)}}(e),e})},getSubTree:function(t){return c.getSubTree(t)},getRecent:function(t){return c.getRecent(t||100)},search:function(t){return c.search(t)}},l=(i(chrome.storage,{name:"storage"}),i(chrome.tabs,{name:"tabs"}));i(chrome.tabs);n.d(e,"b",function(){return a}),n.d(e,"a",function(){return u}),n.d(e,"c",function(){return l})},55:function(t,e,n){"use strict";var r={name:"popup",props:{value:{type:Boolean,default:!0}},data(){return{exit:!1,visible:this.value}},methods:{close(){this.visible=!1,this.$emit("input",!1)},confirm(){},cancel(){this.closePopup(),this.$emit("cancel")}},watch:{value:function(t){console.log(t),this.visible=t}}},o=(n(376),n(2)),i=Object(o.a)(r,function(){var t=this.$createElement,e=this._self._c||t;return this.exit?this._e():e("div",{directives:[{name:"show",rawName:"v-show",value:this.visible,expression:"visible"}],staticClass:"popup-wrap"},[e("div",{staticClass:"mask",on:{click:this.close}}),this._v(" "),e("div",{staticClass:"popup"},[this._t("default")],2)])},[],!1,null,"f8da83aa",null);i.options.__file="popup.vue";var a=i.exports,s={name:"contextmenu",props:{value:!1},data:()=>({ev:!1,visible:!1,style:{}}),methods:{_style(){let t={};return this.ev&&((t=this.xy(this.ev)).transform="translate(0, 0)"),t},xy(t){let e=t.clientX,n=t.clientY,r=e,o=n,i=window.innerWidth,a=window.innerHeight,s=this.$el.offsetWidth,c=this.$el.offsetHeight;return e+s-i>0&&(r=e-(e+s-i)-20),n+c-a>0&&(o=n-(n+c-a)-20),{left:`${r}px`,top:`${o}px`}},cancelContextmenu(){this.ev=!1,this.visible=!1,this.style={},this.$emit("input",!1)}},watch:{value(t){this.ev=t,t?(this.$nextTick(()=>{this.style=this._style()}),document.addEventListener("scroll",this.cancelContextmenu,!0),document.addEventListener("click",this.cancelContextmenu,!1),document.addEventListener("contextmenu",this.cancelContextmenu,!1)):(document.removeEventListener("click",this.cancelContextmenu,!1),document.removeEventListener("contextmenu",this.cancelContextmenu,!1),document.removeEventListener("scroll",this.cancelContextmenu,!0))}}},c=(n(377),Object(o.a)(s,function(){var t=this.$createElement,e=this._self._c||t;return this.ev?e("div",{staticClass:"vueex-contextmenu",style:this.style},[this._t("default")],2):this._e()},[],!1,null,"6efa29b8",null));c.options.__file="contextmenu.vue";var u=c.exports;
/*!
 * Making draggable objects
 * Created by j on 2019-01-15.
 */
class l{constructor(t,e){if(!(this instanceof l))return new l(t,e);this.dom=t,this.callback=e,this.startX=0,this.startY=0,this.downEvent=null,this.moveEvent=null;const n=this,r=this.dom,o=this.onDown=function(t){return t.preventDefault(),this.downEvent=t,n.startX=t.clientX,n.startY=t.clientY,document.addEventListener("mousemove",i),document.addEventListener("mouseup",a),!1},i=function(t){this.moveEvent=t;let e=t.clientX-n.startX,r=t.clientY-n.startY;return n.startX=t.clientX,n.startY=t.clientY,n.callback({moveX:e,moveY:r}),!1},a=function(t){document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",a)};r.addEventListener("mousedown",o,!1)}destroy(){this.dom.removeEventListener("mousedown",this.onDown)}}var f={name:"drag-resize-bar",props:{},data:()=>({info:null}),mounted(){this.bindDrag()},destroyed(){},methods:{bindDrag(){let t=this,e=this.$el;new l(e,function(e){t.$emit("resize",e)})}}},v=(n(378),Object(o.a)(f,function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"drag-resize-bar v"})},[],!1,null,"de345118",null));v.options.__file="index.vue";var m=v.exports;
/*!
 * Created by j on 2019-01-26.
 */var h={$clone:t=>JSON.parse(JSON.stringify(t))};n.d(e,"b",function(){return a});
/*!
 * vue extension.
 * Created by j on 2019-01-11.
 */
const d={...h,$msg:function(t){alert(t)}},p={contextmenu:u,dragResizeBar:m,popup:a},b={install:function(t,e={}){t.prototype;Object.keys(d).forEach(n=>{let r=d[n];if(n=e.alias&&e.alias[n]||n,t.prototype[n])throw new Error(`命名冲突, Vue.prototype.${n}已经存在, 可以通过options.alias.${n}={rename}重新命名.`);t.prototype[n]=r}),Object.keys(p).forEach(e=>{t.component(e,p[e])})}};e.a=b},77:function(t,e,n){},78:function(t,e,n){},79:function(t,e,n){},80:function(t,e,n){},81:function(t,e,n){},82:function(t,e,n){},90:function(t,e,n){"use strict";var r=n(38),o=n(37),i=n(4),a=n(13);function s(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var u={name:"recent",components:{list:r.a,toolBar:o.a},data:function(){return{count:200,bookmarkArray:[]}},created:function(){this.getData()},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){c(t,e,n[e])})}return t}({},Object(a.c)({reverse:function(t){return t.ui.list.reverse}})),methods:{getData:function(){var t,e=(t=regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.getRecent(this.count);case 2:this.bookmarkArray=t.sent,this.reverse&&this.bookmarkArray.reverse();case 4:case"end":return t.stop()}},t,this)}),function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){s(i,r,o,a,c,"next",t)}function c(t){s(i,r,o,a,c,"throw",t)}a(void 0)})});return function(){return e.apply(this,arguments)}}()},watch:{"$root.event":function(){this.getData()},reverse:function(t){this.bookmarkArray.reverse()}}},l=n(2),f=Object(l.a)(u,function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("tool-bar",{attrs:{count:this.count}}),this._v(" "),e("list",{attrs:{bookmarkArray:this.bookmarkArray}})],1)},[],!1,null,"52c88570",null);f.options.__file="recent.vue";e.a=f.exports},91:function(t,e,n){"use strict";var r=n(4),o=n(12);function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function a(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}var s=Object(o.b)("shortcut"),c={name:"shortcut",data:function(){return{bookmarkArray:[]}},created:function(){this.getData()},methods:{getData:function(){var t,e=(t=regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.get().then(function(t){return Object.keys(t)});case 2:return e=t.sent,t.next=5,r.a.get(e).then(function(t){var n=!0,r=!1,o=void 0;try{for(var i,a=t[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;s.shortcut=e.includes(s.id)}}catch(t){r=!0,o=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return t});case 5:this.bookmarkArray=t.sent;case 6:case"end":return t.stop()}},t,this)}),function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function s(t){a(i,r,o,s,c,"next",t)}function c(t){a(i,r,o,s,c,"throw",t)}s(void 0)})});return function(){return e.apply(this,arguments)}}(),onContextmenu:function(t){console.log("shortcut ",t);var e=t[0],n=t[1];if("remove"===e){var r=!0,o=!1,a=void 0;try{for(var s,c=this.bookmarkArray.entries()[Symbol.iterator]();!(r=(s=c.next()).done);r=!0){var u=i(s.value,2),l=u[0],f=u[1];if(n.id===f.id)return this.bookmarkArray.splice(l,1)}}catch(t){o=!0,a=t}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}}}}},u=n(2),l=Object(u.a)(c,function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("list",{attrs:{bookmarkArray:this.bookmarkArray},on:{contextmenu:this.onContextmenu}})],1)},[],!1,null,"346eec24",null);l.options.__file="shortcut.vue";e.a=l.exports},92:function(t,e,n){"use strict";var r=n(4),o={name:"bookmarkEditor",props:{bookmark:Object},data:function(){return{msg:""}},methods:{save:function(){var t=this;r.a.update(this.bookmark).then(function(e){console.log("update",e),t.close()})},create:function(){var t=this;r.a.add(this.bookmark).then(function(e){t.close()})},cancel:function(){this.close()},close:function(){console.log("emit close",arguments),this.$emit("close")}}},i=(n(379),n(2)),a=Object(i.a)(o,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bookmarkEditor"},[n("h3",[t._v("修改书签")]),t._v(" "),n("section",[n("div",{staticClass:"field"},[n("label",{staticClass:"label"},[t._v("title")]),t._v(" "),n("div",{staticClass:"control"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.bookmark.title,expression:"bookmark.title"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.bookmark.title},on:{input:function(e){e.target.composing||t.$set(t.bookmark,"title",e.target.value)}}})])]),t._v(" "),t.bookmark.url?n("div",{staticClass:"field"},[n("label",{staticClass:"label"},[t._v("url")]),t._v(" "),n("div",{staticClass:"control"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.bookmark.url,expression:"bookmark.url"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.bookmark.url},on:{input:function(e){e.target.composing||t.$set(t.bookmark,"url",e.target.value)}}})])]):t._e(),t._v(" "),n("div",{staticClass:"field is-grouped is-grouped-centered"},[n("p",{staticClass:"control"},[n("button",{staticClass:"button is-light",on:{click:t.cancel}},[t._v(" 取消")])]),t._v(" "),n("p",{staticClass:"control"},[t.bookmark.id?n("button",{staticClass:"button is-primary",on:{click:t.save}},[t._v(" 保存")]):n("button",{staticClass:"button is-primary",on:{click:t.create}},[t._v(" 新建")])]),t._v(" "),n("p",{staticClass:"help"},[t._v("\n                "+t._s(t.msg)+"\n            ")])])])])},[],!1,null,"301634a6",null);a.options.__file="bookmarkEditor.vue";e.a=a.exports},93:function(t,e,n){"use strict";
/*!
 * filter
 * Created by j on 2019-01-05.
 */function r(t){return"chrome://favicon/"+t}
/*!
 * 
 * Created by j on 2019-01-09.
 */var o={bind:function(t,e,n,r){},inserted:function(t,e,n,r){var o=e.value;console.log(e),t.onclick=function(t){this.classList.toggle(o)}},update:function(t,e,n,r){},componentUpdated:function(t,e,n,r){},unbind:function(t,e,n,r){t.onclick=void 0}},i=n(92),a=n(38),s=n(94),c=n(37),u={bookmarkEditor:i.a,list:a.a,listItem:s.a,listToolBar:c.a};
/*!
 * 
 * Created by j on 2019-01-09.
 */function l(t,e){return function(t){if(Array.isArray(t))return t}
/*!
 * register components in global
 * Created by j on 2019-01-26.
 */(t)||function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}e.a=function(t){t.filter("getFavicon",r),t.directive("toggle",o),t.prototype.$sortBookmarksBy=function(t,e){return t.sort(function(t,n){if("url"===e){var r=/^\w+:\/\/\/?([\w.]+)/i,o=t.url||"",i=n.url||"",a=o.match(r)||[],s=i.match(r)||[];return a=a[0]||"",s=s[0]||"",console.log(a,s),a===s?0:a.length-s.length}return"children"===e?(t.children?0:1)-(n.children?0:1):t[e]-n[e]})},Object.entries(u).forEach(function(e){var n=l(e,2),r=n[0],o=n[1];t.component(r,o)})}},94:function(t,e,n){"use strict";var r=n(4),o=n(39),i=n(12),a=Object(i.b)("shortcut"),s={name:"listItem",props:{bookmark:Object},methods:{createSubFolder:function(t){Object(o.a)(t)},editBookmark:function(t){Object(o.b)(t)},remove:function(t){r.a.remove(t),this.$emit("contextmenu","remove",t)},addShortcut:function(t){a.set(t),this.$set(this.bookmark,"shortcut",!0)},removeShortcut:function(t){a.remove(t),this.$set(this.bookmark,"shortcut",!1)},open:function(t){return r.c.create({url:t,selected:!0}),!1}}},c=n(2),u=Object(c.a)(s,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("li",[t.bookmark.url?r("a",{attrs:{Xhref:t.bookmark.url,target:"_blank"},on:{click:function(e){t.open(t.bookmark.url)}}},[r("img",{staticClass:"favicon",attrs:{src:t._f("getFavicon")(t.bookmark.url)}}),t._v(" "),r("span",[r("span",{staticClass:"tit"},[t._v(t._s(t.bookmark.title))]),t._v(" "),r("span",{staticClass:"url"},[t._v(t._s(t.bookmark.url))])])]):r("router-link",{attrs:{to:"/node/"+t.bookmark.id}},[r("img",{staticClass:"favicon",attrs:{src:n(375)}}),t._v(" "),r("span",{},[t._v(t._s(t.bookmark.title))])]),t._v(" "),r("div",{staticClass:"contextmenu"},[t._t("default",[t.bookmark.shortcut?r("button",{attrs:{title:"移除快捷方式"},on:{click:function(e){t.removeShortcut(t.bookmark)}}},[r("i",{staticClass:"fas fa-unlink"})]):r("button",{attrs:{title:"加入快捷方式"},on:{click:function(e){t.addShortcut(t.bookmark)}}},[r("i",{staticClass:"fas fa-link"})]),t._v(" "),t.bookmark.url?t._e():r("button",{attrs:{title:"新建子文件夹"},on:{click:function(e){t.createSubFolder(t.bookmark)}}},[r("i",{staticClass:"fas fa-folder-plus"})]),t._v(" "),r("button",{attrs:{title:"编辑"},on:{click:function(e){t.editBookmark(t.bookmark)}}},[r("i",{staticClass:"fas fa-edit"})]),t._v(" "),r("button",{attrs:{title:"删除"},on:{click:function(e){t.remove(t.bookmark)}}},[r("i",{staticClass:"far fa-trash-alt"})])])],2)],1)},[],!1,null,"f3778b38",null);u.options.__file="listItem.vue";e.a=u.exports},95:function(t,e,n){"use strict";var r=n(15),o=n(13);function i(t,e){return function(t){if(Array.isArray(t))return t}
/*!
 * 
 * Created by j on 2019-01-22.
 */(t)||function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var a={config:{},ui:{state:{list:{reverse:!1,showType:"list",orderBy:"index"}},getters:{},actions:{},mutations:{updateUi:function(t,e){for(var n=i(e,2),r=n[0],o=n[1],a=r.split("."),s=t;a.length>=2;)s=s[a.shift()];s[a.shift()]=o}}}};
/*!
 * 
 * Created by j on 2019-01-07.
 */
r.a.use(o.a);e.a=new o.a.Store({modules:a})}}]);
//# sourceMappingURL=common.js.map