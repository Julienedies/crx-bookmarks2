(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{172:function(t,o,e){},173:function(t,o,e){},576:function(t,o,e){t.exports=e(882)},577:function(t,o,e){},878:function(t,o,e){"use strict";var a=e(172);e.n(a).a},879:function(t,o,e){"use strict";var a=e(173);e.n(a).a},882:function(t,o,e){"use strict";e.r(o);e(234),e(272),e(273),e(274),e(275),e(577);var a=e(29),n=e(174),s=e(181),i=e(103),r=e(177),c=e(175),l=e(178),u=e(357),d=e(7),m=e(22),k=e(356);function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var f=new m.a("shortcut"),b={name:"setBookmark",components:{TreeMap:k.default},props:{bookmark:Object},data:function(){return{c:"",c_bookmark:{id:null,parentId:null,title:"",url:"",folderName:""},isSelectFolder:!1}},methods:{add:function(){var t=this;d.a.add(this.c_bookmark).then(function(o){console.log("added",o,t),t.setBookmark(o),t.$msg("已经添加!")})},update:function(){var t=this;d.a.update(this.c_bookmark).then(function(o){console.log("update",o),t.setBookmark(o),t.$msg("更新完成!")})},remove:function(){var t=this;d.a.remove(this.c_bookmark).then(function(o){t.c_bookmark.id=null,t.$msg("已经删除!")})},selectFolder:function(){this.isSelectFolder=!0,this.c="TreeMap"},addShortcut:function(){var t=this;f.set(this.c_bookmark).then(function(o){t.$msg("添加完成!")})},onSelectFolderChange:function(t,o){console.info("selected folder:",t),"object"===v(t)?(this.c_bookmark.parentId=t.id,this.c_bookmark.folderName="".concat(o.join(" / ")),this.isSelectFolder=!1):(delete this.c_bookmark.parentId,this.c_bookmark.folderName="")},setBookmark:function(t){this.c_bookmark=Object.assign({},this.c_bookmark,t)}},watch:{bookmark:function(t,o){this.setBookmark(t)}}},h=(e(878),e(5)),p=Object(h.a)(b,function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",[e("div",{staticClass:"field is-horizontal"},[t._m(0),t._v(" "),e("div",{staticClass:"field-body"},[e("div",{staticClass:"field"},[e("div",{staticClass:"control"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.c_bookmark.title,expression:"c_bookmark.title"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.c_bookmark.title},on:{input:function(o){o.target.composing||t.$set(t.c_bookmark,"title",o.target.value)}}})])])])]),t._v(" "),e("div",{staticClass:"field is-horizontal"},[t._m(1),t._v(" "),e("div",{staticClass:"field-body"},[e("div",{staticClass:"field"},[e("div",{staticClass:"control"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.c_bookmark.url,expression:"c_bookmark.url"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.c_bookmark.url},on:{input:function(o){o.target.composing||t.$set(t.c_bookmark,"url",o.target.value)}}})])])])]),t._v(" "),e("div",{staticClass:"field is-horizontal"},[t._m(2),t._v(" "),e("div",{staticClass:"field-body"},[e("div",{staticClass:"field has-addons"},[e("div",{staticClass:"control is-expanded"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.c_bookmark.folderName,expression:"c_bookmark.folderName"}],staticClass:"input",attrs:{type:"text",readonly:""},domProps:{value:t.c_bookmark.folderName},on:{input:function(o){o.target.composing||t.$set(t.c_bookmark,"folderName",o.target.value)}}})]),t._v(" "),e("div",{staticClass:"control"},[e("a",{staticClass:"button is-info",on:{click:t.selectFolder}},[t._v("\n                        选择文件夹\n                    ")])])])])]),t._v(" "),e("div",{staticClass:"field is-horizontal"},[e("div",{staticClass:"field-label"}),t._v(" "),e("div",{staticClass:"field-body"},[e("div",{staticClass:"field"},[e("div",{staticClass:"control"},[t.c_bookmark.id?e("button",{staticClass:"button is-primary",on:{click:t.update}},[t._v("\n                        更新\n                    ")]):e("button",{staticClass:"button is-primary",on:{click:t.add}},[t._v("\n                        添加\n                    ")]),t._v(" "),e("button",{directives:[{name:"show",rawName:"v-show",value:t.c_bookmark.id,expression:"c_bookmark.id"}],staticClass:"button is-primary",on:{click:t.remove}},[t._v("\n                        删除\n                    ")]),t._v(" "),e("button",{directives:[{name:"show",rawName:"v-show",value:t.c_bookmark.id,expression:"c_bookmark.id"}],staticClass:"button",on:{click:t.addShortcut}},[t._v("添加快捷方式")]),t._v(" "),e("button",{staticClass:"button",on:{click:function(o){return t.$emit("close")}}},[t._v("返回")])])])])]),t._v(" "),e("div",{staticClass:"layer",class:{show:t.isSelectFolder}},[e("div",{staticStyle:{display:"flex","flex-flow":"column",width:"100%",height:"100%"}},[e("div",{staticClass:"box"},[e("button",{staticClass:"button",on:{click:function(o){t.isSelectFolder=!1}}},[t._v("返回")])]),t._v(" "),e("div",{staticStyle:{flex:"1"}},[e(t.c,{tag:"component",on:{selectFolderChange:t.onSelectFolderChange}})],1)])])])},[function(){var t=this.$createElement,o=this._self._c||t;return o("div",{staticClass:"field-label is-normal"},[o("label",{staticClass:"label"},[this._v("title")])])},function(){var t=this.$createElement,o=this._self._c||t;return o("div",{staticClass:"field-label is-normal"},[o("label",{staticClass:"label"},[this._v("url")])])},function(){var t=this.$createElement,o=this._self._c||t;return o("div",{staticClass:"field-label is-normal"},[o("label",{staticClass:"label"},[this._v("文件夹")])])}],!1,null,"6c0c599a",null).exports;function _(t,o,e,a,n,s,i){try{var r=t[s](i),c=r.value}catch(t){return void e(t)}r.done?o(c):Promise.resolve(c).then(a,n)}function C(t){return function(){var o=this,e=arguments;return new Promise(function(a,n){var s=t.apply(o,e);function i(t){_(s,a,n,i,r,"next",t)}function r(t){_(s,a,n,i,r,"throw",t)}i(void 0)})}}Object(m.b)("visit");var g=Object(m.b)("shortcut"),y={name:"App",components:{setBookmark:p,home:c.a,recent:l.a,hot:u.default},data:function(){return{c:"recent",isSetBookmark:!1,isSelectFolder:!1,bookmark:{}}},created:function(){this.getBookmarkByTab()},mounted:function(){this.getData()},computed:{},methods:{getData:function(){var t=C(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),open:function(){d.c.create({url:"./dist/app.html",selected:!0})},getBookmarkByTab:function(){var t=C(regeneratorRuntime.mark(function t(){var o,e,a=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.c.getSelected();case 2:return o=t.sent,console.log("#tab is",o),t.next=6,d.a.search(o.url);case 6:e=t.sent,console.log("#search",e),(e=(e=e||[]).filter(function(t){return t.url===o.url}))&&e.length?(this.bookmark=e[0],d.a.get(this.bookmark.parentId).then(function(t){a.$set(a.bookmark,"folderName",t[0].title)})):this.bookmark={title:o.title,url:o.url};case 11:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),addShortcut:function(){var t=this;g.set(this.bookmark).then(function(o){t.$msg("添加完成!")})}},watch:{c:function(t){this.$router.push({name:t})},$route:function(t,o){console.log("watch $route",t,o)}}},w=(e(879),Object(h.a)(y,function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticStyle:{height:"100%"}},[e("div",{staticClass:"box",staticStyle:{height:"100%",display:"flex","flex-flow":"column"}},[e("div",{staticStyle:{padding:"0 0 12px 0","text-align":"right"}},[e("span",{},[e("button",{staticClass:"button",class:{"is-info":"home"===t.c},on:{click:function(o){t.c="home"}}},[t._v("快捷")]),t._v(" "),e("button",{staticClass:"button",class:{"is-info":"recent"===t.c},on:{click:function(o){t.c="recent"}}},[t._v("最近")]),t._v(" "),e("button",{staticClass:"button",class:{"is-info":"hot"===t.c},on:{click:function(o){t.c="hot"}}},[t._v("常用")]),t._v(" "),e("button",{staticClass:"button",class:{"is-info":"tree"===t.c},on:{click:function(o){t.c="tree"}}},[t._v("目录")])]),t._v(" "),e("span",{},[t.bookmark.id?e("button",{staticClass:"button",on:{click:function(o){t.isSetBookmark=1}}},[t._v("修改书签")]):e("button",{staticClass:"button",on:{click:function(o){t.isSetBookmark=1}}},[t._v("添加书签")]),t._v(" "),e("button",{directives:[{name:"show",rawName:"v-show",value:t.bookmark.id,expression:"bookmark.id"}],staticClass:"button",on:{click:t.addShortcut}},[t._v("添加快捷方式")]),t._v(" "),e("button",{staticClass:"button",on:{click:t.open}},[t._v("打开书签管理器")])])]),t._v(" "),e("div",{staticStyle:{flex:"1"}},[e("router-view")],1)]),t._v(" "),e("div",{staticClass:"layer",class:{show:t.isSetBookmark}},[e("setBookmark",{attrs:{bookmark:t.bookmark},on:{close:function(o){t.isSetBookmark=!1}}})],1)])},[],!1,null,"4669f609",null).exports);
/*!
 * popup html entry
 * Created by j on 2019-01-10.
 */
a.a.use(i.a),Object(r.a)(a.a),new a.a({el:"#app",router:n.a,store:s.a,data:{event:{name:"",args:""}},mounted:function(){var t=this;d.a.on(function(o){for(var e=arguments.length,a=new Array(e>1?e-1:0),n=1;n<e;n++)a[n-1]=arguments[n];console.log("bookmarks event => ",o,a),t.event={name:o,args:a}})},render:function(t){return t(w)}})}},[[576,2,1,0]]]);
//# sourceMappingURL=popup.js.map