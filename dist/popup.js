(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{172:function(t,e,o){},173:function(t,e,o){},576:function(t,e,o){t.exports=o(882)},577:function(t,e,o){},878:function(t,e,o){"use strict";var a=o(172);o.n(a).a},879:function(t,e,o){"use strict";var a=o(173);o.n(a).a},882:function(t,e,o){"use strict";o.r(e);o(234),o(272),o(273),o(274),o(275),o(577);var a=o(29),n=o(174),s=o(181),i=o(103),c=o(177),r=o(175),l=o(178),u=o(357),d=o(7),m=o(22),f=o(356);function k(t){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var v=new m.a("shortcut"),b={name:"setBookmark",components:{TreeMap:f.default},props:{bookmark:Object},data:function(){return{c:"",c_bookmark:{id:null,parentId:null,title:"",url:"",folderName:""},isSelectFolder:!1}},methods:{add:function(){var t=this;d.a.add(this.c_bookmark).then(function(e){console.log("added",e,t),t.setBookmark(e),t.$msg("已经添加!")})},update:function(){var t=this;d.a.update(this.c_bookmark).then(function(e){console.log("update",e),t.setBookmark(e),t.$msg("更新完成!")})},remove:function(){var t=this;d.a.remove(this.c_bookmark).then(function(e){t.c_bookmark.id=null,t.$msg("已经删除!")})},selectFolder:function(){this.isSelectFolder=!0,this.c="TreeMap"},addShortcut:function(){var t=this;v.set(this.c_bookmark).then(function(e){t.$msg("添加完成!")})},onSelectFolderChange:function(t,e){console.info("selected folder:",t),"object"===k(t)?(this.c_bookmark.parentId=t.id,this.c_bookmark.folderName="".concat(e.join(" / ")),this.isSelectFolder=!1):(delete this.c_bookmark.parentId,this.c_bookmark.folderName="")},setBookmark:function(t){this.c_bookmark=Object.assign({},this.c_bookmark,t)}},watch:{bookmark:function(t,e){this.setBookmark(t)}}},h=(o(878),o(5)),p=Object(h.a)(b,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"field is-horizontal"},[t._m(0),t._v(" "),o("div",{staticClass:"field-body"},[o("div",{staticClass:"field"},[o("div",{staticClass:"control"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.c_bookmark.title,expression:"c_bookmark.title"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.c_bookmark.title},on:{input:function(e){e.target.composing||t.$set(t.c_bookmark,"title",e.target.value)}}})])])])]),t._v(" "),o("div",{staticClass:"field is-horizontal"},[t._m(1),t._v(" "),o("div",{staticClass:"field-body"},[o("div",{staticClass:"field"},[o("div",{staticClass:"control"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.c_bookmark.url,expression:"c_bookmark.url"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.c_bookmark.url},on:{input:function(e){e.target.composing||t.$set(t.c_bookmark,"url",e.target.value)}}})])])])]),t._v(" "),o("div",{staticClass:"field is-horizontal"},[t._m(2),t._v(" "),o("div",{staticClass:"field-body"},[o("div",{staticClass:"field has-addons"},[o("div",{staticClass:"control is-expanded"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.c_bookmark.folderName,expression:"c_bookmark.folderName"}],staticClass:"input",attrs:{type:"text",readonly:""},domProps:{value:t.c_bookmark.folderName},on:{input:function(e){e.target.composing||t.$set(t.c_bookmark,"folderName",e.target.value)}}})]),t._v(" "),o("div",{staticClass:"control"},[o("a",{staticClass:"button is-info",on:{click:t.selectFolder}},[t._v("\n                        选择文件夹\n                    ")])])])])]),t._v(" "),o("div",{staticClass:"field is-horizontal"},[o("div",{staticClass:"field-label"}),t._v(" "),o("div",{staticClass:"field-body"},[o("div",{staticClass:"field"},[o("div",{staticClass:"control"},[t.c_bookmark.id?o("button",{staticClass:"button is-primary",on:{click:t.update}},[t._v("\n                        更新\n                    ")]):o("button",{staticClass:"button is-primary",on:{click:t.add}},[t._v("\n                        添加\n                    ")]),t._v(" "),o("button",{directives:[{name:"show",rawName:"v-show",value:t.c_bookmark.id,expression:"c_bookmark.id"}],staticClass:"button is-primary",on:{click:t.remove}},[t._v("\n                        删除\n                    ")]),t._v(" "),o("button",{directives:[{name:"show",rawName:"v-show",value:t.c_bookmark.id,expression:"c_bookmark.id"}],staticClass:"button",on:{click:t.addShortcut}},[t._v("添加快捷方式")]),t._v(" "),o("button",{staticClass:"button",on:{click:function(e){return t.$emit("close")}}},[t._v("返回")])])])])]),t._v(" "),o("div",{staticClass:"layer",class:{show:t.isSelectFolder}},[o("div",{staticStyle:{display:"flex","flex-flow":"column",width:"100%",height:"100%"}},[o("div",{staticClass:"box"},[o("button",{staticClass:"button",on:{click:function(e){t.isSelectFolder=!1}}},[t._v("返回")])]),t._v(" "),o("div",{staticStyle:{flex:"1"}},[o(t.c,{tag:"component",on:{selectFolderChange:t.onSelectFolderChange}})],1)])])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"field-label is-normal"},[e("label",{staticClass:"label"},[this._v("title")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"field-label is-normal"},[e("label",{staticClass:"label"},[this._v("url")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"field-label is-normal"},[e("label",{staticClass:"label"},[this._v("文件夹")])])}],!1,null,"6c0c599a",null).exports;function _(t,e,o,a,n,s,i){try{var c=t[s](i),r=c.value}catch(t){return void o(t)}c.done?e(r):Promise.resolve(r).then(a,n)}function y(t){return function(){var e=this,o=arguments;return new Promise(function(a,n){var s=t.apply(e,o);function i(t){_(s,a,n,i,c,"next",t)}function c(t){_(s,a,n,i,c,"throw",t)}i(void 0)})}}Object(m.b)("visit");var C=Object(m.b)("shortcut"),g={name:"App",components:{setBookmark:p,home:r.a,recent:l.a,hot:u.default},data:function(){return{c:"home",isSetBookmark:!1,isSelectFolder:!1,bookmark:{}}},created:function(){this.$router.push({name:this.c}),this.getBookmarkByTab()},mounted:function(){this.getData()},computed:{},methods:{getData:function(){var t=y(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),open:function(){d.c.create({url:"./dist/app.html",selected:!0})},getBookmarkByTab:function(){var t=y(regeneratorRuntime.mark(function t(){var e,o,a=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.c.getSelected();case 2:return e=t.sent,console.log("#tab is",e),t.next=6,d.a.search(e.url);case 6:o=t.sent,console.log("#search",o),(o=(o=o||[]).filter(function(t){return t.url===e.url}))&&o.length?(this.bookmark=o[0],d.a.get(this.bookmark.parentId).then(function(t){a.$set(a.bookmark,"folderName",t[0].title)})):this.bookmark={title:e.title,url:e.url};case 11:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),addShortcut:function(){var t=this;C.set(this.bookmark).then(function(e){t.$msg("添加完成!")})}},watch:{c:function(t){this.$router.push({name:t})},$route:function(t,e){console.log("watch $route",t,e)}}},w=(o(879),Object(h.a)(g,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticStyle:{height:"100%",position:"fixed",left:"0",top:"0",bottom:"0",right:"0",background:"#fff","overflow-y":"scroll"}},[o("div",{staticClass:"box",staticStyle:{height:"100%",display:"flex","flex-flow":"column"}},[o("header",[o("div",{staticStyle:{padding:"0 0 12px 0","text-align":"right",display:"flex","justify-content":"space-between"}},[o("div",{staticStyle:{display:"flex","justify-content":"flex-start"}},[o("button",{staticClass:"button",class:{"is-info":"home"===t.c},on:{click:function(e){t.c="home"}}},[t._v("快捷")]),t._v(" "),o("button",{staticClass:"button",class:{"is-info":"recent"===t.c},on:{click:function(e){t.c="recent"}}},[t._v("最近")]),t._v(" "),o("button",{staticClass:"button",class:{"is-info":"hot"===t.c},on:{click:function(e){t.c="hot"}}},[t._v("常用")]),t._v(" "),o("button",{staticClass:"button",class:{"is-info":"tree"===t.c},on:{click:function(e){t.c="tree"}}},[t._v("目录")])]),t._v(" "),o("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[t.bookmark.id?o("button",{staticClass:"button",on:{click:function(e){t.isSetBookmark=1}}},[t._v("修改书签")]):o("button",{staticClass:"button",on:{click:function(e){t.isSetBookmark=1}}},[t._v("添加书签")]),t._v(" "),o("button",{directives:[{name:"show",rawName:"v-show",value:t.bookmark.id,expression:"bookmark.id"}],staticClass:"button",on:{click:t.addShortcut}},[t._v("添加快捷方式")]),t._v(" "),o("button",{staticClass:"button",on:{click:t.open}},[t._v("打开书签管理器")])])])]),t._v(" "),o("div",{staticStyle:{flex:"1"}},[o("router-view")],1)]),t._v(" "),o("div",{staticClass:"layer",class:{show:t.isSetBookmark}},[o("setBookmark",{attrs:{bookmark:t.bookmark},on:{close:function(e){t.isSetBookmark=!1}}})],1)])},[],!1,null,"1dd1cc2e",null).exports);
/*!
 * popup html entry
 * Created by j on 2019-01-10.
 */
a.a.use(i.a),Object(c.a)(a.a),new a.a({el:"#app",router:n.a,store:s.a,data:{event:{name:"",args:""}},mounted:function(){var t=this;d.a.on(function(e){for(var o=arguments.length,a=new Array(o>1?o-1:0),n=1;n<o;n++)a[n-1]=arguments[n];console.log("bookmarks event => ",e,a),t.event={name:e,args:a}})},render:function(t){return t(w)}})}},[[576,2,1,0]]]);
//# sourceMappingURL=popup.js.map