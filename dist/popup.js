(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{171:function(t,o,e){},172:function(t,o,e){},576:function(t,o,e){t.exports=e(882)},577:function(t,o,e){},878:function(t,o,e){"use strict";var s=e(171);e.n(s).a},879:function(t,o,e){"use strict";var s=e(172);e.n(s).a},882:function(t,o,e){"use strict";e.r(o);e(232),e(270),e(271),e(272),e(273),e(577);var s=e(29),a=e(179),n=e(103),i=e(177),c=e(178),r=e(174),l=e(357),u=e(7),d=e(22),m=e(356);function k(t){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var v=new d.a("shortcut"),f={name:"setBookmark",components:{TreeMap:m.default},props:{bookmark:Object},data:function(){return{c:"",c_bookmark:{id:null,parentId:null,title:"",url:"",folderName:""},isSelectFolder:!1}},methods:{add:function(){var t=this;u.a.add(this.c_bookmark).then(function(o){console.log("added",o,t),t.setBookmark(o),t.$msg("已经添加!")})},update:function(){var t=this;u.a.update(this.c_bookmark).then(function(o){console.log("update",o),t.setBookmark(o),t.$msg("更新完成!")})},remove:function(){var t=this;u.a.remove(this.c_bookmark).then(function(o){t.c_bookmark.id=null,t.$msg("已经删除!")})},selectFolder:function(){this.isSelectFolder=!0,this.c="TreeMap"},addShortcut:function(){var t=this;v.set(this.c_bookmark).then(function(o){t.$msg("添加完成!")})},onSelectFolderChange:function(t,o){console.info("selected folder:",t),"object"===k(t)?(this.c_bookmark.parentId=t.id,this.c_bookmark.folderName="".concat(o.join(" / ")),this.isSelectFolder=!1):(delete this.c_bookmark.parentId,this.c_bookmark.folderName="")},setBookmark:function(t){this.c_bookmark=Object.assign({},this.c_bookmark,t)}},watch:{bookmark:function(t,o){this.setBookmark(t)}}},b=(e(878),e(5)),h=Object(b.a)(f,function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",[e("div",{staticClass:"field is-horizontal"},[t._m(0),t._v(" "),e("div",{staticClass:"field-body"},[e("div",{staticClass:"field"},[e("div",{staticClass:"control"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.c_bookmark.title,expression:"c_bookmark.title"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.c_bookmark.title},on:{input:function(o){o.target.composing||t.$set(t.c_bookmark,"title",o.target.value)}}})])])])]),t._v(" "),e("div",{staticClass:"field is-horizontal"},[t._m(1),t._v(" "),e("div",{staticClass:"field-body"},[e("div",{staticClass:"field"},[e("div",{staticClass:"control"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.c_bookmark.url,expression:"c_bookmark.url"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.c_bookmark.url},on:{input:function(o){o.target.composing||t.$set(t.c_bookmark,"url",o.target.value)}}})])])])]),t._v(" "),e("div",{staticClass:"field is-horizontal"},[t._m(2),t._v(" "),e("div",{staticClass:"field-body"},[e("div",{staticClass:"field has-addons"},[e("div",{staticClass:"control is-expanded"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.c_bookmark.folderName,expression:"c_bookmark.folderName"}],staticClass:"input",attrs:{type:"text",readonly:""},domProps:{value:t.c_bookmark.folderName},on:{input:function(o){o.target.composing||t.$set(t.c_bookmark,"folderName",o.target.value)}}})]),t._v(" "),e("div",{staticClass:"control"},[e("a",{staticClass:"button is-info",on:{click:t.selectFolder}},[t._v("\n                        选择文件夹\n                    ")])])])])]),t._v(" "),e("div",{staticClass:"field is-horizontal"},[e("div",{staticClass:"field-label"}),t._v(" "),e("div",{staticClass:"field-body"},[e("div",{staticClass:"field"},[e("div",{staticClass:"control"},[t.c_bookmark.id?e("button",{staticClass:"button is-primary",on:{click:t.update}},[t._v("\n                        更新\n                    ")]):e("button",{staticClass:"button is-primary",on:{click:t.add}},[t._v("\n                        添加\n                    ")]),t._v(" "),e("button",{directives:[{name:"show",rawName:"v-show",value:t.c_bookmark.id,expression:"c_bookmark.id"}],staticClass:"button is-primary",on:{click:t.remove}},[t._v("\n                        删除\n                    ")]),t._v(" "),e("button",{directives:[{name:"show",rawName:"v-show",value:t.c_bookmark.id,expression:"c_bookmark.id"}],staticClass:"button",on:{click:t.addShortcut}},[t._v("添加快捷方式")]),t._v(" "),e("button",{staticClass:"button",on:{click:function(o){return t.$emit("close")}}},[t._v("返回")])])])])]),t._v(" "),e("div",{staticClass:"layer",class:{show:t.isSelectFolder}},[e("div",{staticStyle:{display:"flex","flex-flow":"column",width:"100%",height:"100%"}},[e("div",{staticClass:"box"},[e("button",{staticClass:"button",on:{click:function(o){t.isSelectFolder=!1}}},[t._v("返回")])]),t._v(" "),e("div",{staticStyle:{flex:"1"}},[e(t.c,{tag:"component",on:{selectFolderChange:t.onSelectFolderChange}})],1)])])])},[function(){var t=this.$createElement,o=this._self._c||t;return o("div",{staticClass:"field-label is-normal"},[o("label",{staticClass:"label"},[this._v("title")])])},function(){var t=this.$createElement,o=this._self._c||t;return o("div",{staticClass:"field-label is-normal"},[o("label",{staticClass:"label"},[this._v("url")])])},function(){var t=this.$createElement,o=this._self._c||t;return o("div",{staticClass:"field-label is-normal"},[o("label",{staticClass:"label"},[this._v("文件夹")])])}],!1,null,"6c0c599a",null).exports;function p(t,o,e,s,a,n,i){try{var c=t[n](i),r=c.value}catch(t){return void e(t)}c.done?o(r):Promise.resolve(r).then(s,a)}function _(t){return function(){var o=this,e=arguments;return new Promise(function(s,a){var n=t.apply(o,e);function i(t){p(n,s,a,i,c,"next",t)}function c(t){p(n,s,a,i,c,"throw",t)}i(void 0)})}}Object(d.b)("visit");var C=Object(d.b)("shortcut"),g={name:"App",components:{setBookmark:h,shortcut:c.a,recent:r.a,hot:l.default},data:function(){return{c:"shortcut",isSetBookmark:!1,isSelectFolder:!1,bookmark:{}}},created:function(){this.getBookmarkByTab()},mounted:function(){this.getData()},computed:{},methods:{getData:function(){var t=_(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),open:function(){u.c.create({url:"./dist/app.html",selected:!0})},getBookmarkByTab:function(){var t=_(regeneratorRuntime.mark(function t(){var o,e,s=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.c.getSelected();case 2:return o=t.sent,console.log("#tab is",o),t.next=6,u.a.search(o.url);case 6:e=t.sent,console.log("#search",e),(e=(e=e||[]).filter(function(t){return t.url===o.url}))&&e.length?(this.bookmark=e[0],u.a.get(this.bookmark.parentId).then(function(t){s.$set(s.bookmark,"folderName",t[0].title)})):this.bookmark={title:o.title,url:o.url};case 11:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),addShortcut:function(){var t=this;C.set(this.bookmark).then(function(o){t.$msg("添加完成!")})}}},y=(e(879),Object(b.a)(g,function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"box"},[e("div",{staticClass:"level"},[e("div",{staticClass:"level-left buttons has-addons"},[e("button",{staticClass:"button",class:{"is-info":"shortcut"===t.c},on:{click:function(o){t.c="shortcut"}}},[t._v("快捷")]),t._v(" "),e("button",{staticClass:"button",class:{"is-info":"recent"===t.c},on:{click:function(o){t.c="recent"}}},[t._v("最近")]),t._v(" "),e("button",{staticClass:"button",class:{"is-info":"hot"===t.c},on:{click:function(o){t.c="hot"}}},[t._v("常用")])]),t._v(" "),e("div",{staticClass:"level-right buttons has-addons"},[t.bookmark.id?e("button",{staticClass:"button",on:{click:function(o){t.isSetBookmark=1}}},[t._v("修改书签")]):e("button",{staticClass:"button",on:{click:function(o){t.isSetBookmark=1}}},[t._v("添加书签")]),t._v(" "),e("button",{directives:[{name:"show",rawName:"v-show",value:t.bookmark.id,expression:"bookmark.id"}],staticClass:"button",on:{click:t.addShortcut}},[t._v("添加快捷方式")]),t._v(" "),e("button",{staticClass:"button",on:{click:t.open}},[t._v("打开书签管理器")])])]),t._v(" "),e("div",[e(t.c,{tag:"component"})],1),t._v(" "),e("div",{staticClass:"layer",class:{show:t.isSetBookmark}},[e("setBookmark",{attrs:{bookmark:t.bookmark},on:{close:function(o){t.isSetBookmark=!1}}})],1)])},[],!1,null,"60d9bf4e",null).exports);
/*!
 * popup html entry
 * Created by j on 2019-01-10.
 */
s.a.use(n.a),Object(i.a)(s.a),new s.a({el:"#app",store:a.a,render:function(t){return t(y)}})}},[[576,2,1,0]]]);
//# sourceMappingURL=popup.js.map